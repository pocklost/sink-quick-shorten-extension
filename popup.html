<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Sink</title>
    <style>
      *,*::before,*::after{box-sizing:border-box}
      html,body{margin:0;padding:0}
      body{width:360px;min-height:120px;font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;color:#0f172a;background:#ffffff}
      .container{display:grid;gap:12px;width:100%;padding:14px}
      .tabs{display:grid;grid-template-columns:repeat(4,1fr);gap:6px;background:#f4f4f5;border:1px solid #e5e7eb;border-radius:12px;padding:4px;will-change:contents}
      .tab{padding:8px 10px;border:none;border-radius:10px;background:transparent;color:#6b7280;cursor:pointer;text-align:center;transition:all .2s cubic-bezier(0.4, 0, 0.2, 1);will-change:background-color,color,transform;transform:translateZ(0)}
      .tab:hover{background:rgba(17,24,39,0.1);transform:scale(1.02) translateZ(0)}
      .tab.active{background:#111827;color:#ffffff;transform:scale(1.05) translateZ(0)}
      .card{border:1px solid #e5e7eb;border-radius:14px;background:#ffffff;padding:12px;transition:all .2s ease;will-change:transform;transform:translateZ(0)}
      .row{display:grid;gap:6px}
      .stack{display:grid;gap:12px}
      .inline{display:grid;grid-template-columns:1fr auto;gap:8px;align-items:center;min-width:0}
      .wrap{display:flex;align-items:center;gap:0;padding:10px 12px;border:1px solid #e5e7eb;border-radius:12px;background:#f9fafb;min-width:0;transition:all .2s ease}
      .label{font-size:12px;color:#888;font-weight:600}
      .muted{font-size:12px;color:#6b7280}
      .input{width:100%;min-width:0;padding:10px 12px;border:1px solid #e5e7eb;border-radius:12px;outline:none;background:#ffffff;transition:all .2s ease;will-change:border-color,box-shadow}
      .input:focus{border-color:#3b82f6;box-shadow:0 0 0 3px rgba(59,130,246,0.1)}
      .input.error{border-color:#ef4444;box-shadow:0 0 0 3px rgba(239,68,68,0.1)}
      .btn{padding:10px 12px;border-radius:12px;border:1px solid #e5e7eb;background:#111827;color:#ffffff;cursor:pointer;transition:all .2s cubic-bezier(0.4, 0, 0.2, 1);will-change:transform;transform:translateZ(0)}
      .btn:hover{filter:brightness(1.05);transform:translateY(-1px) translateZ(0);box-shadow:0 2px 4px rgba(0,0,0,0.1)}
      .btn:active{transform:translateY(0) translateZ(0)}
      .btn.secondary{background:#ffffff;color:#111827}
      .list-item{display:flex;align-items:center;justify-content:space-between;border: 1px solid #e5e7eb;border-radius:12px;padding:10px 12px;background:#ffffff;transition:all .2s ease;will-change:transform;transform:translateZ(0)}
      .metrics{display:flex;gap:10px;font-size:12px;color:#334155}
      .metric{display:grid;gap:2px}
      .metric .label{color:#888}
      .metric .value{font-size:16px;font-weight:600;color:#111827}
      .support-card{background:#ffffff;border:1px solid #e5e7eb;color:#111827}
      .support-card .badge{background:#f3f4f6;color:#ef4444;box-shadow:inset 0 1px 0 rgba(255,255,255,0.8)}
      .support-card .support-link{text-decoration:none;color:inherit}
      #links{display:grid;gap:10px;overflow:auto;padding:1.5px 2px;max-height:360px;scroll-behavior:smooth;will-change:scroll-position}
      canvas{width:100%;height:60px}
      @keyframes shimmer{0%{background-position:-200% 0}100%{background-position:200% 0}}
      @media (prefers-color-scheme: dark){
        body{color:#f1f1f1;background:#0F0F0F}
        .tabs{background:#1A1A1A;border-color:#252525}
        .tab{color:#c1c1c1}
        .tab.active{background:#333333;color:#ffffff}
        .card{background:#1A1A1A;border-color:#252525}
        .wrap{background:#1A1A1A;border-color:#252525}
        .input{background:#1A1A1A;color:#ffffff;border-color:#252525}
        .input:focus{border-color:#3b82f6;box-shadow:0 0 0 3px rgba(59,130,246,0.2)}
        .btn{background:#252525;color:#ffffff;border-color:#333333}
        .btn.secondary{background:#2A2A2A;color:#f1f1f1;border-color:#2F2F2F}
        .list-item{background:#252525;color:#ffffff;border-color:#333333}
        .muted{color:#888}
        .metric .value{color:#ffffff}
        .support-card{background:#252525;border:1px solid #333333;color:#f1f1f1}
        .support-card .badge{background:#333;color:#ef4444;box-shadow:none}
        .support-card .support-link{color:#f1f1f1;text-decoration:none}
        
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="tabs">
        <button id="tab-create" data-tab="create" class="tab active">__MSG_titleCreate__</button>
        <button id="tab-links" data-tab="links" class="tab">__MSG_titleLinks__</button>
        <button id="tab-analytics" data-tab="analytics" class="tab">__MSG_titleAnalytics__</button>
        <button id="tab-settings" data-tab="settings" class="tab">__MSG_titleSettings__</button>
      </div>
      <section id="panel-create" class="stack" style="opacity:1;transform:translateY(0);transition:opacity 0.2s ease,transform 0.2s ease">
        <div class="card stack">
          <div class="row">
            <div id="label-short-key" class="label">Short Key</div>
            <div class="inline">
              <div class="wrap">
                <span id="host-prefix">https://example.com/</span>
                <input id="input-slug" class="input" style="border:none;background:transparent;padding:0;margin:0;flex:2;min-width:0" />
              </div>
              <button id="generate-slug" class="btn secondary">Random</button>
            </div>
          </div>
          <div class="row">
            <div id="label-long-url" class="label">Long URL</div>
            <input id="input-url" class="input" />
          </div>
          <div id="advanced-options" class="stack" style="display:none">
            <label class="muted" for="input-comment">__MSG_comment__</label>
            <input id="input-comment" class="input" placeholder="__MSG_comment__" />
            <label class="muted" for="input-expiration">__MSG_expiration__</label>
            <input id="input-expiration" class="input" type="datetime-local" />
          </div>
          <button id="create" class="btn" style="width:100%">Create & Copy</button>
          <div id="success-feedback" style="display:none;padding:12px;border:1px solid #bbf7d0;border-radius:12px;background:#f0fdf4;color:#166534;text-align:center;font-size:14px;font-weight:500">
              <span id="success-text">Short link created and copied!</span>
          </div>
          <div id="result-area" style="display:none" class="stack">
            <div id="result" class="muted" style="word-break:break-all"></div>
            <div style="display:flex;gap:8px">
              <button id="btn-copy-result" class="btn secondary" style="flex:1">Copy</button>
              <button id="btn-qr-result" class="btn secondary" style="flex:1">QR Code</button>
            </div>
          </div>
          <div style="display:flex;justify-content:space-between">
            <button id="toggle-advanced" class="btn secondary">Advanced</button>
            <button id="open" class="btn secondary">Dashboard</button>
          </div>
        </div>
      </section>
      <section id="panel-links" style="display:none;opacity:0;transform:translateY(4px);transition:opacity 0.2s ease,transform 0.2s ease">
        <div id="links"></div>
      </section>
      <section id="panel-analytics" class="card" style="display:none;opacity:0;transform:translateY(4px);transition:opacity 0.2s ease,transform 0.2s ease">
        <div id="analytics-title" class="label" style="font-size:13px"></div>
        <div class="metrics card" style="margin-top:10px">
          <div class="metric"><div class="label">__MSG_visits__</div><div class="value" id="metric-visits">-</div></div>
          <div class="metric"><div class="label">__MSG_visitors__</div><div class="value" id="metric-visitors">-</div></div>
          <div class="metric"><div class="label">__MSG_referers__</div><div class="value" id="metric-referers">-</div></div>
        </div>
        <div class="card" style="margin-top:8px">
          <canvas id="chart" width="280" height="80"></canvas>
        </div>
        <div id="analytics-error" class="muted" style="margin-top:6px;display:none"></div>
      </section>
      <section id="panel-settings" class="card" style="display:none;opacity:0;transform:translateY(4px);transition:opacity 0.2s ease,transform 0.2s ease">
        <div class="stack">
          <div class="muted">__MSG_settingsDesc__</div>
          <input id="setting-host" class="input" placeholder="https://sink.cool/" aria-label="__MSG_host__" />
          <input id="setting-token" class="input" type="password" placeholder="Your API token" aria-label="__MSG_token__" />
          <div class="label">__MSG_other__</div>
          <div class="list-item">
            <label class="muted" for="setting-auto-detect" id="label-auto-detect" style="margin:0">__MSG_autoDetect__</label>
            <input id="setting-auto-detect" type="checkbox" style="width:16px;height:16px" />
          </div>
          <div class="list-item">
            <label class="muted" for="setting-show-context" id="label-show-context" style="margin:0">__MSG_showContextMenu__</label>
            <input id="setting-show-context" type="checkbox" style="width:16px;height:16px" />
          </div>
          <div class="card support-card" style="display:flex;align-items:center;gap:12px;justify-content:space-between;">
            <div style="display:flex;align-items:center;gap:10px;min-width:0;">
              <div class="badge" style="width:32px;height:32px;border-radius:10px;display:flex;align-items:center;justify-content:center;font-weight:700;font-size:16px;flex-shrink:0;">
                ‚ù§
              </div>
              <div style="display:grid;gap:4px;min-width:0;">
                <div style="font-weight:600;font-size:13px;">__MSG_supportDev__</div>
                <div class="muted" style="font-size:12px;line-height:1.5;white-space:normal;word-break:break-all;max-width:180px;">__MSG_supportDevDesc__</div>
              </div>
            </div>
            <a href="https://ko-fi.com/pocket377" target="_blank" rel="noopener" class="btn secondary support-link" style="padding:8px 12px;white-space:nowrap;min-width:64px;text-align:center;">__MSG_supportDevAction__</a>
          </div>
          <div style="display:flex;gap:8px">
            <button id="setting-save" class="btn" style="flex:1">__MSG_save__</button>
            <button id="setting-test" class="btn secondary" style="flex:1">__MSG_test__</button>
          </div>
          <div id="setting-status" class="muted"></div>
        </div>
      </section>
    </div>
    <script src="popup.js"></script>
  </body>
</html>

